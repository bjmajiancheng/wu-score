<!DOCTYPE html>
<html lang="en">
<head>
    <title>#if(${addFlag}) 申请人信息填写 #else 修改申请人信息 #end</title>
    #parse("common/header.html")
</head>

<body>
#parse("common/banner.html")

<!-- 主体部分 -->
<div class="integral-main-box">

    <!-- 左部导航 -->
    #parse("common/lefter.html")
    <!-- </script> -->
    <!-- 中间二级导航 -->

    <!-- 内容展示区 -->
    <div class="integral-cont">
        <!-- 第二大部分 -->
        <!-- 表单部分 -->
        <!-- 示例title 面包屑导航 -->
        <div class="integral-grey-title-bar">
            <div class="title-bar-head">居住证积分</div>
            <div class="title-bar-after">#if(${addFlag}) 申请人信息填写 #else 修改申请人信息 #end</div>
        </div>
        <!-- 内容描述title -->
        <div class="integral-desc-title">
            #if(${addFlag}) 申请人信息填写 #else 修改申请人信息 #end
        </div>
        <!-- 示例title2 二级标题 -->
        <div class="integral-grey-title-bar title-bar2">
            <div class="title-bar-head title-bar-sfz">身份证信息</div>
        </div>
        <!-- 表单主体部分  用table实现布局 -->
        <div class="integral-cont-table-wrap">
            <form class="identityInfoForm" id="identityInfoForm">
                <input type="hidden" name="id" value="$!{identityInfo.id}" id="identityInfoId"/>
                <table class="integral-cont-table">
                    <tr>
                        <td class="color-red"></span>身份证号：</td>
                        <td>
                            <input class="integral-input w450" type="text" id="idNumber" name="idNumber" value="$!{identityInfo.idNumber}">
                            <!-- <div class="interal-main-btn m15">身份证上传</div> -->
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <div class="integral-idcard-img">
                                <img class="addImg pointer" src="${rc.contextPath}/$static.curr_ver()/img/IDcard1.png"
                                     onclick="integral.clickImg(this);" #if("$!{identityInfo.idCardPositive}" != "") style="display: none;" #end >
                                <img class="preview" id="preview" alt="" name="pic" width="152" height="100"
                                     #if("$!{identityInfo.idCardPositive}"=="") style="display:none;" #end src="$!{identityInfo.idCardPositive}"/>
                                <input id="idcard1" name="idcard1" type="file" class="upload_input" accept="image/*"
                                       onchange="integral.change(this)" attr-inp="id_card_positive"/>
                                <div class="pointer title_click" onclick="integral.clickImg(this);">点击上传身份证正面</div>
                                <div class="title_idcard" style="display:none;">身份证正面</div>
                                <div class="del_idcard" onclick="integral.deleteImg(this)" style="display:none;"></div>

                                <input name="id_card_positive" type="hidden" value="$!{identityInfo.idCardPositive}"/>
                            </div>
                            <div class="integral-idcard-img">
                                <img class="addImg pointer" src="${rc.contextPath}/$static.curr_ver()/img/IDcard2.png"
                                     onclick="integral.clickImg(this);" #if("$!{identityInfo.idCardOpposite}" != "") style="display: none;" #end alt="">
                                <img class="preview" id="back" alt="" name="pic" width="152" height="100"
                                     #if("$!{identityInfo.idCardOpposite}"=="") style="display:none;" #end src="$!{identityInfo.idCardOpposite}"/>
                                <input id="idcard2" name="idcard2" type="file" class="upload_input" accept="image/*"
                                       onchange="integral.change(this)" attr-inp="id_card_opposite"/>
                                <div class="pointer title_click" onclick="integral.clickImg(this);">点击上传身份证反面</div>
                                <div class="title_idcard" style="display:none;">身份证反面</div>
                                <div class="del_idcard" onclick="integral.deleteImg(this)" style="display:none;"></div>

                                <input name="id_card_opposite" type="hidden" value="$!{identityInfo.idCardOpposite}"/>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">姓&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名：</td>
                        <td>
                            <input class="integral-input w450" type="text" name="name" id="name" value="$!{identityInfo.name}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">性&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;别：</td>
                        <td>
                            <input class="input_radio" type="radio" name="sex" value="1" id="male" #if(${identityInfo.sex} == 1) checked #end>&nbsp;
                            <label for="male">男</label>
                            <input class="input_radio ml30" type="radio" name="sex" value="2" id="female" #if(${identityInfo.sex} == 2) checked #end>&nbsp;
                            <label for="female">女</label>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">出生日期：</td>
                        <td>
                            <input class="integral-input w450" type="text" name="birthday" id="birthday" value="$!{identityInfo.birthday}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">年&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;龄：</td>
                        <td>
                            <input class="integral-input w450" type="number" id="age" name="age" value="$!{identityInfo.age}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">民&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;族：</td>
                        <td>
                            <!--<input class="integral-input w450" type="text" name="nation" id="nation" value="$!{identityInfo.nation}">-->
                            <select name="nation" id="nation" style="width:125px;">
                                <option value="汉族">汉族</option>
                                <option value="蒙古族">蒙古族</option>
                                <option value="回族">回族</option>
                                <option value="藏族">藏族</option>
                                <option value="维吾尔族">维吾尔族</option>
                                <option value="苗族">苗族</option>
                                <option value="彝族">彝族</option>
                                <option value="壮族">壮族</option>
                                <option value="布依族">布依族</option>
                                <option value="朝鲜族">朝鲜族</option>
                                <option value="满族">满族</option>
                                <option value="侗族">侗族</option>
                                <option value="瑶族">瑶族</option>
                                <option value="白族">白族</option>
                                <option value="土家族">土家族</option>
                                <option value="哈尼族">哈尼族</option>
                                <option value="哈萨克族">哈萨克族</option>
                                <option value="傣族">傣族</option>
                                <option value="黎族">黎族</option>
                                <option value="傈僳族">傈僳族</option>
                                <option value="佤族">佤族</option>
                                <option value="畲族">畲族</option>
                                <option value="高山族">高山族</option>
                                <option value="拉祜族">拉祜族</option>
                                <option value="水族">水族</option>
                                <option value="东乡族">东乡族</option>
                                <option value="纳西族">纳西族</option>
                                <option value="景颇族">景颇族</option>
                                <option value="柯尔克孜族">柯尔克孜族</option>
                                <option value="土族">土族</option>
                                <option value="达斡尔族">达斡尔族</option>
                                <option value="仫佬族">仫佬族</option>
                                <option value="羌族">羌族</option>
                                <option value="布朗族">布朗族</option>
                                <option value="撒拉族">撒拉族</option>
                                <option value="毛难族">毛难族</option>
                                <option value="仡佬族">仡佬族</option>
                                <option value="锡伯族">锡伯族</option>
                                <option value="阿昌族">阿昌族</option>
                                <option value="普米族">普米族</option>
                                <option value="塔吉克族">塔吉克族</option>
                                <option value="怒族">怒族</option>
                                <option value="乌孜别克族">乌孜别克族</option>
                                <option value="俄罗斯族">俄罗斯族</option>
                                <option value="鄂温克族">鄂温克族</option>
                                <option value="崩龙族">崩龙族</option>
                                <option value="保安族">保安族</option>
                                <option value="裕固族">裕固族</option>
                                <option value="京族">京族</option>
                                <option value="塔塔尔族">塔塔尔族</option>
                                <option value="独龙族">独龙族</option>
                                <option value="鄂伦春族">鄂伦春族</option>
                                <option value="赫哲族">赫哲族</option>
                                <option value="门巴族">门巴族</option>
                                <option value="珞巴族">珞巴族</option>
                                <option value="基诺族">基诺族</option>
                            </select>
                        </td>
                    </tr>
                </table>
            </form>
        </div>
        <!-- 示例title2 二级标题 -->
        <div class="integral-grey-title-bar title-bar2">
            <div class="title-bar-head title-bar-hjqy">户籍迁移信息</div>
        </div>
        <!-- 表单主体部分  用table实现布局 -->
        <div class="integral-cont-table-wrap">
            <form class="houseMoveForm" id="houseMoveForm">
                <input type="hidden" name="id" value="$!{houseMoveModel.id}" />
                <table class="integral-cont-table">
                    <tr>
                        <td class="color-red">迁出地区：</td>
                        <td>
                            <select name="moveProvince" id="moveProvince" style="width:125px;">
                                <option value="0">请选择</option>
                            </select>
                            省
                            <select class="ml40" name="moveCity" id="moveCity" style="width:125px;">
                                <option value="0">请选择</option>
                            </select>
                            市
                            <select class="ml40" name="moveRegion" id="moveRegion" style="width:125px;">
                                <option value="0">请选择</option>
                            </select>
                            区
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">迁出地地址：</td>
                        <td>
                            <input class="integral-input w518" type="text" name="moveAddress" id="moveAddress" value="$!{houseMoveModel.moveAddress}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">现户籍登记机关：</td>
                        <td>
                            <input class="integral-input w518" type="text" name="moveRegisteredOffice"
                                   id="moveRegisteredOffice" value="$!{houseMoveModel.moveRegisteredOffice}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">现户口性质：</td>
                        <td>
                            <select name="houseNature" id="houseNature">
                                <!--<option value="0">请选择</option>-->
                                <option value="1">未落常住户口</option>
                                <option value="2">非农业家庭户口</option>
                                <option value="3">农业家庭户口</option>
                                <option value="4">非农业集体户口</option>
                                <option value="5">农业集体户口</option>
                                <option value="6">自理口粮户口</option>
                                <option value="7">寄住户口</option>
                                <option value="8">暂住户口</option>
                                <option value="9">地方城镇居民户口</option>
                                <option value="10">其他户口</option>
                            </select>
                            <span class="integral-td-title ml50">落户性质：</span>
                            <select name="settledNature" id="settledNature">
                                <!--<option value="0">请选择</option>-->
                                <option value="1">本单位集体户口</option>
                                <option value="2">非本单位集体户口</option>
                                <option value="3">家庭户口</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">迁入户籍登记机关：</td>
                        <td>
                            <select name="registeredOffice" id="registeredOffice">
                                <option value="0">请选择</option>
                            </select>
                            <span class="integral-td-title ml50">登记地区：</span>
                            <select name="registeredRegion" id="registeredRegion">
                                <option value="0">请选择</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">迁入地址详细地址：</td>
                        <td>
                            <input class="integral-input w518" type="text" name="address" id="address" value="$!{houseMoveModel.address}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">收件人：</td>
                        <td>
                            <input class="integral-input w200" placeholder="户口准予迁入收件人" type="text" name="witness"
                                   id="witness" value="$!{houseMoveModel.witness}">
                            <span class="integral-td-title ml75">手机号：</span>
                            <input class="integral-input w200" type="text" name="witnessPhone" id="witnessPhone" value="$!{houseMoveModel.witnessPhone}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">邮寄地址：</td>
                        <td>
                            <input class="integral-input w518" type="text" name="witnessAddress" id="witnessAddress" value="$!{houseMoveModel.witnessAddress}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">拟落户地区：</td>
                        <td>
                            <select name="region" id="region">
                                <option value="21">和平区</option>
                                <option value="22">河东区</option>
                                <option value="23">河西区</option>
                                <option value="24">南开区</option>
                                <option value="25">河北区</option>
                                <option value="26">红桥区</option>
                                <option value="27">东丽区</option>
                                <option value="28">西青区</option>
                                <option value="29">津南区</option>
                                <option value="30">北辰区</option>
                                <option value="31">武清区</option>
                                <option value="32">宝坻区</option>
                                <option value="33">滨海新区</option>
                                <option value="34">宁河区</option>
                                <option value="35">静海区</option>
                                <option value="36">蓟州区</option>
                            </select>
                            <span class="integral-td-title ml50">婚姻状况：</span>
                            <select name="marriageStatus" id="marriageStatus">
                                <option value="1">已婚</option>
                                <option value="2">未婚</option>
                                <option value="3">丧偶</option>
                                <option value="4">离婚</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">有无子女</td>
                        <td>
                            <input class="input_radio" type="radio" name="haveSon" value="1" id="haveSon" #if(${houseMoveModel.haveSon} == 1) checked #end>
                            &nbsp;&nbsp;&nbsp; <label for="haveSon">有</label>
                            <input class="input_radio ml30" type="radio" name="haveSon" value="2" id="haveNoSon" #if(${houseMoveModel.haveSon} == 2) checked #end>
                            &nbsp;&nbsp;&nbsp;<label for="haveNoSon">无</label>
                            <span class="integral-td-title ml50">子女数量：</span>
                            <input class="integral-input" type="number" min="0" placeholder="无子女数量可不填" name="sonNumber"
                                   id="sonNumber" value="$!{houseMoveModel.sonNumber}" style="width:265px;">
                        </td>
                    </tr>
                </table>
            </form>
            <!-- 上边选中子女 为有 校验下方子女表 -->
            <span class="color-red" style="font-size: 12px;">提示：如不填写配偶信息，“婚姻情况”指标不积分。</span>
            <div id="children-table">
                <!-- table表格部分1 子女关系表 -->
                <form class="houseRelationshipsForm">
                    <table class="integral-table border-add integral-cont-table houseRelationships">
                        <tr>
                            <th width="50"></th>
                            <th>与本人关系</th>
                            <th>姓名</th>
                            <th width="281">身份证号</th>
                            <th width="100">是否随迁</th>
                            <th>文化程度</th>
                        </tr>
                        #foreach(${houseRelationship} in $!{houseRelationshipList})
                        <tr class="houseRelationship">
                            <td>
                                <input type="hidden" name="id" value="$!{houseRelationship.id}">
                                <input type="checkbox" name="check" class="checkRelation">
                            </td>
                            <td>
                                <select name="relationship">
                                    <option value="子" #if(${houseRelationship.relationship}=="子") selected #end>子</option>
                                    <option value="女" #if(${houseRelationship.relationship}=="女") selected #end>女</option>
                                    <option value="配偶" #if(${houseRelationship.relationship}=="配偶") selected #end>配偶</option>
                                </select>
                            </td>
                            <td>
                                <input class="table_add_input" type="text" name="name" value="$!{houseRelationship.name}">
                            </td>
                            <td>
                                <input class="table_add_input" type="text" name="idNumber" value="$!{houseRelationship.idNumber}">
                            </td>
                            <td><input type="radio" name="isRemove${velocityCount}" value="1" id="isRemove1${velocityCount}" #if(${houseRelationship.isRemove} == 1) checked #end>
                                <label for="isRemove1${velocityCount}">是</label>
                                <input class="m15" type="radio" name="isRemove${velocityCount}" value="2" id="isRemove2${velocityCount}" #if(${houseRelationship.isRemove} == 2) checked #end>
                                <label for="isRemove2${velocityCount}">否</label></td>
                            <td>
                                <input class="table_add_input" type="text" name="cultureDegree" value="$!{houseRelationship.cultureDegree}">
                            </td>
                        </tr>
                        #end
                    </table>
                </form>
                <!-- 子女关系表 控制按钮 -->
                <div class="integral-paging-device-wrap">
                    <!--  -->
                    <div class="interal-main-btn m15 fr mt10" id="addRelation">增加</div>
                    <div class="interal-main-btn m15 fr mt10" id="delRelation">删除</div>
                </div>
            </div>
        </div>
        <!-- 示例title2 二级标题 -->
        <div class="integral-grey-title-bar title-bar2">
            <div class="title-bar-head title-bar-other">其他信息</div>
        </div>
        <!-- 表单主体部分  用table实现布局 -->
        <div class="integral-cont-table-wrap">
            <form class="houseOtherForm" id="houseOtherForm">
                <input type="hidden" name="id" value="$!{houseOtherModel.id}" />

                <table class="integral-cont-table">
                    <tr>
                        <td class="color-red">申请人类型：</td>
                        <td>
                            <input class="input_radio" type="radio" name="applicantType" value="1" id="radio13" #if(${houseOtherModel.applicantType} == 1) checked #end>
                            &nbsp;&nbsp;&nbsp;<label for="radio13">企业员工</label>
                            <input class="input_radio ml30" type="radio" name="applicantType" value="2" id="radio14" #if(${houseOtherModel.applicantType} == 2) checked #end>
                            &nbsp;&nbsp;&nbsp;<label for="radio14">投资者</label>
                            <input class="input_radio ml30" type="radio" name="applicantType" value="3" id="radio15" #if(${houseOtherModel.applicantType} == 3) checked #end>
                            &nbsp;&nbsp;&nbsp;<label for="radio15">个体商户</label>
                            <input class="input_radio ml30" type="radio" name="applicantType" value="4" id="radio151" #if(${houseOtherModel.applicantType} == 4) checked #end>
                            &nbsp;&nbsp;&nbsp;<label for="radio151">机关事业单位</label>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">政治面貌：</td>
                        <td>
                            <select name="politicalStatus" id="politicalStatus">
                                <option value="13" selected>群众</option>
                                <option value="1">中共党员</option>
                                <option value="2">中共预备党员</option>
                                <option value="3">共青团员</option>
                                <option value="4">民革会员</option>
                                <option value="5">民盟盟员</option>
                                <option value="6">民建会员</option>
                                <option value="7">民进会员</option>
                                <option value="8">农工党党员</option>
                                <option value="9">致公党党员</option>
                                <option value="10">九三学社社员</option>
                                <option value="11">台盟盟员</option>
                                <option value="12">无党派民主人士</option>
                            </select>
                            <span class="integral-td-title ml50">军人立功：</span>
                            <select name="soldierMeritorious" id="soldierMeritorious">
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">文化程度：</td>
                        <td>
                            <select name="cultureDegree" id="cultureDegree">
                            </select>
                            <span class="integral-td-title ml75">学位：</span>
                            <select name="degree" id="degree">
                                <option value="0">无</option>
                                <option value="1">博士后</option>
                                <option value="2">名誉博士</option>
                                <option value="3">博士</option>
                                <option value="4">硕士</option>
                                <option value="5">学士</option>
                                <option value="6">双学士</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">专业：</td>
                        <td>
                            <input class="integral-input w518" type="text" name="profession" id="profession" value="$!{houseOtherModel.profession}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">实际用工单位名称：</td>
                        <td>
                            <input class="integral-input w518" type="text" name="companyName" value="$!{houseOtherModel.companyName}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">实际用工单位地址：</td>
                        <td>
                            <input class="integral-input w518" type="text" name="companyAddress" value="$!{houseOtherModel.companyAddress}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">当前工作岗位：</td>
                        <td>
                            <input class="integral-input w200" type="text" name="jobTitle" value="$!{houseOtherModel.jobTitle}">
                            <span class="integral-td-title ml50">主要从事工作内容：</span>
                            <input class="integral-input w200" type="text" name="jobContent" value="$!{houseOtherModel.jobContent}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">单位座机电话：</td>
                        <td>
                            <input class="integral-input w200" type="text" name="companyPhone" value="$!{houseOtherModel.companyPhone}">
                            <span class="integral-td-title ml50">本人手机：</span>
                            <input class="integral-input w200" type="text" name="selfPhone" value="$!{houseOtherModel.selfPhone}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">居住证申领日期：</td>
                        <td>
                            <input class="integral-input w200" type="text" name="applicationDate" id="applicationDate" value="$!{houseOtherModel.applicationDate}">
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">社保缴纳：</td>
                        <td>
                            <input class="input_radio" type="radio" name="socialSecurityPay" value="1" id="redio1" #if(${houseOtherModel.socialSecurityPay} == 1) checked #end>
                            &nbsp;&nbsp;&nbsp;<label for="redio1">是</label>
                            <input class="input_radio ml30" type="radio" name="socialSecurityPay" value="2" id="redio2" #if(${houseOtherModel.socialSecurityPay} == 2) checked #end>
                            &nbsp;&nbsp;&nbsp;<label for="redio2">否</label>
                            <span class="grey-color">是否缴纳社保</span>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">公积金：</td>
                        <td>
                            <input class="input_radio" type="radio" name="providentFund" value="1" id="redio3" #if(${houseOtherModel.providentFund} == 1) checked #end>
                            &nbsp;&nbsp;&nbsp;<label for="redio3">是</label>
                            <input class="input_radio ml30" type="radio" name="providentFund" value="2" id="redio4" #if(${houseOtherModel.providentFund} == 2) checked #end>
                            &nbsp;&nbsp;&nbsp;<label for="redio4">否</label>
                            <span class="grey-color">是否参加住房公积金</span>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">纳税情况：</td>
                        <td>
                            <input class="input_radio" type="radio" name="taxes" value="1" id="radio5" #if(${houseOtherModel.taxes} == 1) checked #end>
                            &nbsp;&nbsp;&nbsp;<label for="radio5">是</label>
                            <input class="input_radio ml30" type="radio" name="taxes" value="2" id="radio6" #if(${houseOtherModel.taxes} == 2) checked #end>
                            &nbsp;&nbsp;&nbsp;
                            <label for="radio6">否</label>
                            <span class="grey-color">近3年在本市依法缴纳个人所得税累计10万元及以上</span>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">拘留记录：</td>
                        <td>
                            <input class="input_radio" type="radio" name="detention" value="1" id="radio7" #if(${houseOtherModel.detention} == 1) checked #end>
                            &nbsp;&nbsp;&nbsp;
                            <label for="radio7">是</label>
                            <input class="input_radio ml30" type="radio" name="detention" value="2" id="radio8" #if(${houseOtherModel.detention} == 2) checked #end>
                            &nbsp;&nbsp;&nbsp;
                            <label for="radio8">否</label>
                            <span class="grey-color">积分期间有无行政拘留记录</span>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">获刑记录：</td>
                        <td>
                            <input class="input_radio" type="radio" name="penalty" value="1" id="radio9" #if(${houseOtherModel.penalty} == 1) checked #end>
                            &nbsp;&nbsp;&nbsp;
                            <label for="radio9">是</label>
                            <input class="input_radio ml30" type="radio" name="penalty" value="2" id="radio10" #if(${houseOtherModel.penalty} == 2) checked #end>
                            &nbsp;&nbsp;&nbsp;
                            <label for="radio10">否</label>
                            <span class="grey-color">积分期间有无犯罪获刑记录</span>
                        </td>
                    </tr>
                    <tr>
                        <td class="color-red">奖项荣誉称号：</td>
                        <td>
                            <select name="awardsTitle" id="awardsTitle" style="width:518px;">
                            </select>
                        </td>
                    </tr>
                </table>
            </form>
        </div>

        <!-- 示例title2 二级标题 -->
        <div class="integral-grey-title-bar title-bar2">
            <div class="title-bar-head title-bar-zyzg">职业资格证书</div>
        </div>
        <!-- 表单主体部分  用table实现布局 -->
        <div class="integral-cont-table-wrap">
            <form class="houseProfessionForm">
                <input type="hidden" name="id" value="$!{houseProfessionModel.id}" />
                <table class="integral-cont-table">
                    <tr>
                        <td class="color-red">职业资格项：</td>
                        <td>
                            <input class="input_radio" type="radio" name="professionType" value="1" id="radio16" #if(${addFlag}) checked #end #if(${houseProfessionModel.professionType} == 1) checked #end>
                            &nbsp;&nbsp;&nbsp;
                            <label for="radio16">无</label>
                            <input class="input_radio ml30" type="radio" name="professionType" value="2" id="radio17" #if(${houseProfessionModel.professionType} == 2) checked #end>
                            &nbsp;&nbsp;&nbsp;
                            <label for="radio17">具有职称</label>
                            <input class="input_radio ml30" type="radio" name="professionType" value="3" id="radio18" #if(${houseProfessionModel.professionType} == 3) checked #end>
                            &nbsp;&nbsp;&nbsp;
                            <label for="radio18">具有职业资格</label>
                        </td>
                    </tr>
                    <tr class="professionType_2 color-red">
                        <td>专业名称：</td>
                        <td>
                            <select name="professionTitle" id="professionTitle">
                                <option value="1">注册消防工程师</option>
                                <option value="2">注册核安全工程师</option>
                                <option value="3">注册建筑师</option>
                                <option value="4">监理工程师</option>
                                <option value="5">房地产估价师</option>
                                <option value="6">造价工程师</option>
                                <option value="7">注册城乡规划师</option>
                                <option value="8">建造师</option>
                                <option value="9">勘察设计注册工程师</option>
                                <option value="10">注册验船师</option>
                                <option value="11">拍卖师</option>
                                <option value="12">医生资格</option>
                                <option value="13">护士执业资格</option>
                                <option value="14">注册设备监理师</option>
                                <option value="15">注册计量师</option>
                                <option value="16">注册安全工程师</option>
                                <option value="17">执业药师</option>
                                <option value="18">注册测绘师</option>
                                <option value="19">工程咨询（投资）专业技术人员职业资格</option>
                                <option value="20">通信专业技术人员职业资格</option>
                                <option value="21">计算机技术与软件专业技术资格</option>
                                <option value="22">社会工作者职业资格</option>
                                <option value="23">会计专业技术资格</option>
                                <option value="24">资产评估师</option>
                                <option value="25">经济专业技术资格</option>
                                <option value="26">土地登记代理专业人员职业资格</option>
                                <option value="27">环境影响评价工程师</option>
                                <option value="28">房地产经纪专业人员职业资格</option>
                                <option value="29">机动车检测维修专业技术人员职业资格</option>
                                <option value="30">公路水运工程试验检测专业技术人员职业资格</option>
                                <option value="31">卫生专业技术资格</option>
                                <option value="32">审计专业技术资格</option>
                                <option value="33">税务师</option>
                                <option value="34">出版专业技术人员职业资格</option>
                                <option value="35">统计专业技术资格</option>
                                <option value="36">银行业专业人员职业资格</option>
                                <option value="37">翻译专业资格</option>
                            </select>
                            <span class="integral-td-title ml50">职称级别：</span>
                            <select name="jobTitleLevel" id="jobTitleLevel" onchange="showInfo()">
                                <option value="1">初级职称</option>
                                <option value="2">中级职称</option>
                                <option value="3">高级职称</option>
                            </select>
                        </td>
                    </tr>
                    <!--<tr class="professionType_2 color-red">
                        <td>职称级别：</td>
                        <td>
                            <select name="jobTitleLevel" id="jobTitleLevel">
                                <option value="1">初级职称</option>
                                <option value="2">中级职称</option>
                                <option value="3">高级职称</option>
                            </select>
                        </td>
                    </tr>-->

                    <tr class="professionType_3 color-red">
                        <td>职业资格级别：</td>
                        <td>
                            <select name="jobLevel" id="jobLevel" onchange="showInfo2()">
                            </select>
                            <span class="integral-td-title ml50">职业名称：</span>
                            <select name="jobName" id="jobName">
                                <option value="1">消防设施操作员</option>
                                <option value="2">焊工</option>
                                <option value="3">家畜繁殖员</option>
                                <option value="4">游泳救生员</option>
                                <option value="5">社会体育指导员</option>
                                <option value="6">轨道列车司机</option>
                                <option value="7">设备点检员</option>
                                <option value="8">电工</option>
                                <option value="9">锅炉设备检修工</option>
                                <option value="10">变电设备检修工</option>
                                <option value="11">工程机械维修工</option>
                                <option value="12">起重装卸机械操作工</option>
                                <option value="13">电梯安装维修工</option>
                                <option value="14">制冷空调系统安装维修工</option>
                                <option value="15">筑路工</option>
                                <option value="16">桥隧工</option>
                                <option value="17">防水工</option>
                                <option value="18">电力电缆安装运维工</option>
                                <option value="19">砌筑工</option>
                                <option value="20">混凝土工</option>
                                <option value="21">钢筋工</option>
                                <option value="22">架子工</option>
                                <option value="23">水生产处理工</option>
                                <option value="24">工业废水处理工</option>
                                <option value="25">工业气体生产工</option>
                                <option value="26">工业废气治理工</option>
                                <option value="27">压缩机操作工</option>
                                <option value="28">锅炉运行值班员</option>
                                <option value="29">发电集控值班员</option>
                                <option value="30">变配电运行值班员</option>
                                <option value="31">继电保护员</option>
                                <option value="32">燃气轮机值班员</option>
                                <option value="33">锅炉操作工</option>
                                <option value="34">钟表及计时仪器制造工</option>
                                <option value="35">广电和通信设备电子装接工</option>
                                <option value="36">广电和通信设备调试工</option>
                                <option value="37">计算机及外部设备装配调试员</option>
                                <option value="38">液晶显示器件制造工</option>
                                <option value="39">半导体芯片制造工</option>
                                <option value="40">半导体分立器件和集成电路装调工</option>
                                <option value="41">电子产品制版工</option>
                                <option value="42">印制电路制作工</option>
                                <option value="43">电线电缆制造工</option>
                                <option value="44">变压器互感器制造工</option>
                                <option value="45">高低压电器及成套设备装配工</option>
                                <option value="46">汽车装调工</option>
                                <option value="47">矫形器装配工</option>
                                <option value="48">假肢装配工</option>
                                <option value="49">机床装调维修工</option>
                                <option value="50">模具工</option>
                                <option value="51">铸造工</option>
                                <option value="52">锻造工</option>
                                <option value="53">金属热处理工</option>
                                <option value="54">车工</option>
                                <option value="55">铣工</option>
                                <option value="56">钳工</option>
                                <option value="57">磨工</option>
                                <option value="58">冲压工</option>
                                <option value="59">电切削工</option>
                                <option value="60">硬质合金成型工</option>
                                <option value="61">硬质合金烧结工</option>
                                <option value="62">硬质合金精加工工</option>
                                <option value="63">轧制原料工</option>
                                <option value="64">金属轧制工</option>
                                <option value="65">金属材热处理工</option>
                                <option value="66">金属材精整工</option>
                                <option value="67">金属挤压工</option>
                                <option value="68">铸轧工</option>
                                <option value="69">氧化铝制取工</option>
                                <option value="70">铝电解工</option>
                                <option value="71">重冶火法冶炼工</option>
                                <option value="72">电解精炼工</option>
                                <option value="73">重冶湿法冶炼工</option>
                                <option value="74">炼钢原料工</option>
                                <option value="75">炼钢工</option>
                                <option value="76">高炉原料工</option>
                                <option value="77">高炉炼铁工</option>
                                <option value="78">高炉运转工</option>
                                <option value="79">井下支护工</option>
                                <option value="80">矿山救护工</option>
                                <option value="81">陶瓷原料准备工</option>
                                <option value="82">陶瓷烧成工</option>
                                <option value="83">陶瓷装饰工</option>
                                <option value="84">玻璃纤维及制品工</option>
                                <option value="85">玻璃钢制品工</option>
                                <option value="86">水泥生产工</option>
                                <option value="87">石膏制品生产工</option>
                                <option value="88">水泥混凝土制品工</option>
                                <option value="89">药物制剂工</option>
                                <option value="90">中药炮制工</option>
                                <option value="91">涂料生产工</option>
                                <option value="92">染料生产工</option>
                                <option value="93">农药生产工</option>
                                <option value="94">合成氨生产工</option>
                                <option value="95">尿素生产工</option>
                                <option value="96">硫酸生产工</option>
                                <option value="97">硝酸生产工</option>
                                <option value="98">纯碱生产工</option>
                                <option value="99">烧碱生产工</option>
                                <option value="100">无机化学反应生产工</option>
                                <option value="101">有机合成工</option>
                                <option value="102">化工总控工</option>
                                <option value="103">防腐蚀工</option>
                                <option value="104">制冷工</option>
                                <option value="105">炼焦煤制备工</option>
                                <option value="106">炼焦工</option>
                                <option value="107">景泰蓝制作工</option>
                                <option value="108">手工木工</option>
                                <option value="109">服装制版师</option>
                                <option value="110">印染前处理工</option>
                                <option value="111">印花工</option>
                                <option value="112">印染后整理工</option>
                                <option value="113">印染染化料配制工</option>
                                <option value="114">纺织染色工</option>
                                <option value="115">整经工</option>
                                <option value="116">织布工</option>
                                <option value="117">纺纱工</option>
                                <option value="118">缫丝工</option>
                                <option value="119">纺织纤维梳理工</option>
                                <option value="120">并条工</option>
                                <option value="121">酿酒师</option>
                                <option value="122">品酒师</option>
                                <option value="123">酒精酿造工</option>
                                <option value="124">白酒酿造工</option>
                                <option value="125">啤酒酿造工</option>
                                <option value="126">黄酒酿造工</option>
                                <option value="127">果露酒酿造工</option>
                                <option value="128">评茶员</option>
                                <option value="129">乳品评鉴师</option>
                                <option value="130">制米工</option>
                                <option value="131">制粉工</option>
                                <option value="132">制油工</option>
                                <option value="133">农作物植保员</option>
                                <option value="134">动物疫病防治员</option>
                                <option value="135">动物检疫检验员</option>
                                <option value="136">水生物病害防治员</option>
                                <option value="137">林业有害生物防治员</option>
                                <option value="138">农机修理工</option>
                                <option value="139">沼气工</option>
                                <option value="140">农业技术员</option>
                                <option value="141">助听器验配师</option>
                                <option value="142">口腔修复体制作工</option>
                                <option value="143">眼镜验光员</option>
                                <option value="144">眼镜定配工</option>
                                <option value="145">健康管理师</option>
                                <option value="146">生殖健康咨询师</option>
                                <option value="147">信息通信网络终端维修员</option>
                                <option value="148">汽车维修工</option>
                                <option value="149">保健调理师</option>
                                <option value="150">美容师</option>
                                <option value="151">美发师</option>
                                <option value="152">孤残儿童护理员</option>
                                <option value="153">育婴员</option>
                                <option value="154">保育员</option>
                                <option value="155">有害生物防制员</option>
                                <option value="156">工业固体废物处理处置工</option>
                                <option value="157">水文勘测工</option>
                                <option value="158">河道修防工</option>
                                <option value="159">水工闸门运行工</option>
                                <option value="160">水工监测工</option>
                                <option value="161">地勘钻探工</option>
                                <option value="162">地质调查员</option>
                                <option value="163">地勘掘进工</option>
                                <option value="164">地质实验员</option>
                                <option value="165">物探工</option>
                                <option value="166">农产品食品检验员</option>
                                <option value="167">纤维检验员</option>
                                <option value="168">贵金属首饰与宝玉石检测员</option>
                                <option value="169">机动车检测工</option>
                                <option value="170">大地测量员</option>
                                <option value="171">摄影测量员</option>
                                <option value="172">地图绘制员</option>
                                <option value="173">不动产测绘员</option>
                                <option value="174">工程测量员</option>
                                <option value="175">保安员</option>
                                <option value="176">安检员</option>
                                <option value="177">智能楼宇管理员</option>
                                <option value="178">安全评价师</option>
                                <option value="179">劳动关系协调员</option>
                                <option value="180">企业人力资源管理师</option>
                                <option value="181">中央空调系统运行操作员</option>
                                <option value="182">信息通信网络运行管理员</option>
                                <option value="183">广播电视天线工</option>
                                <option value="184">有线广播电视机线员</option>
                                <option value="185">信息通信网络机务员</option>
                                <option value="186">信息通信网络线务员</option>
                                <option value="187">中式烹调师</option>
                                <option value="188">中式面点师</option>
                                <option value="189">西式烹调师</option>
                                <option value="190">西式面点师</option>
                                <option value="191">茶艺师</option>
                                <option value="192">（粮油）仓储管理员</option>
                                <option value="193">民航乘务员</option>
                                <option value="194">机场运行指挥员</option>
                                <option value="195">机动车驾驶教练员</option>
                                <option value="196">消防员</option>
                                <option value="197">森林消防员</option>
                                <option value="198">应急救援员</option>
                            </select>
                        </td>
                    </tr>
                    <tr class="professionType_3 color-red">
                        <td>工种：</td>
                        <td>
                            <select name="jobType" id="jobType" onchange="showInfo3()">
                            </select>
                        </td>
                    </tr>
                    <tr class="professionType_23 color-red">
                        <td>发证机关：</td>
                        <td>
                            <input class="integral-input w200" type="text" name="issuingAuthority" id="issuingAuthority" value="$!{houseProfessionModel.issuingAuthority}">
                            <span class="integral-td-title ml50">发证日期：</span>
                            <input class="integral-input w200" type="text" name="issuingDate" id="issuingDate" value="$!{houseProfessionModel.issuingDate}">
                        </td>
                    </tr>
                    <!--<tr class="professionType_2 color-red">
                        <td>职位：</td>
                        <td>
                            <input class="integral-input w200" type="text" name="jobPosition" id="jobPosition" value="$!{houseProfessionModel.jobPosition}">
                            <span class="integral-td-title ml50">发证机关：</span>
                            <input class="integral-input w200" type="text" name="issuingAuthority" id="issuingAuthority" value="$!{houseProfessionModel.issuingAuthority}">
                        </td>
                    </tr>-->
                    <tr class="professionType_23 color-red">
                        <td>证书编号：</td>
                        <td>
                            <input class="integral-input w200" type="text" name="certificateCode" id="certificateCode" value="$!{houseProfessionModel.certificateCode}">
                            <!--<span class="integral-td-title ml50">证书编号：</span>
                            <input class="integral-input w200" type="text" name="certificateCode" id="certificateCode" value="$!{houseProfessionModel.certificateCode}">-->
                        </td>
                    </tr>

                </table>
            </form>
        </div>

        <!-- 验证码和底部按钮 -->
        <table class="check-table">
            <tr>
                <td>
                    <span class="color-red">*</span>验证码：
                </td>
                <td>
                    <input class="integral-input w200" type="text" name="captcha">
                    <div class="checkimg">
                        <img id="captchaImg" src="${rc.contextPath}/captcha.jpg" alt="看不清点我" class="click_me">
                    </div>
                    <span class="click_me">看不清点我</span>
                </td>
            </tr>
        </table>
        <!-- 保存按钮 -->
        <div class="integral-bottom-btn-group">
            <div class="interal-main-btn big-btn m15" id="submitAndContinue">保存并继续录入</div>
            <div class="interal-main-btn big-btn ml50" id="submit">保存</div>
            <div class="interal-main-btn big-btn ml50" id="cancel">返回</div>
        </div>
    </div>
</div>

<!-- 底部栏 footer -->
#parse("common/footer.html")
</body>
<script type="text/javascript" src="${rc.contextPath}/$static.curr_ver()/js/jquery.form.min.js"></script>
<script type="text/javascript">
    var relation_idx = $("tr.houseRelationship").length+1;

    $(function () {

        currPage("addIdentity");

        laydate.render({
            elem: '#birthday' //生日
            ,max: 0,
            change: function(value, date, endDate) {
                var date = new Date();
                var startDate = new Date(value);
                var newDate = date.getTime() - startDate.getTime();
                var age = Math.ceil(newDate / 1000 / 60 / 60 / 24 /365);
                if (isNaN(age)){
                    age = 0;
                }
                $("#age").val(age);
            }
        });

        laydate.render({
            elem: '#issuingDate' //发证日期
            ,max: 0
        });

        laydate.render({
            elem: '#applicationDate' //居住证申领日期
            ,max: 0
        });

        //获取评分选项信息
        getResultData("${rc.contextPath}/indicator/getAllIndicators", {}, function(data){
            //1.年龄,2.受教育程度,3.专业技术、职业技能水平,4.社会保险,5.住房公积金,6.住房,7.在津连续居住年限,
            //8.职业（工种）,9.落户地区,10.纳税,11.婚姻情况,12.知识产权,13.奖项和荣誉称号,14.退役军人,15.守法诚信
            initIndicatorInfo(data["2"], $("#cultureDegree"), '$!{houseOtherModel.cultureDegree}');

            initIndicatorInfo_2(data["3"], $("#jobLevel"), '$!{houseProfessionModel.jobLevel}');

            initIndicatorInfo(data["8"], $("#jobType"), '$!{houseProfessionModel.jobType}');

            initIndicatorInfo(data["13"], $("#awardsTitle"), '$!{houseOtherModel.awardsTitle}');

            initIndicatorInfo(data["14"], $("#soldierMeritorious"), '$!{houseOtherModel.soldierMeritorious}');
        });

        //初始化省份信息
        regionChange(0, "moveProvince", '$!{houseMoveModel.moveProvince}');

        $("#moveProvince").on("change",
            function () {
                regionChange($("#moveProvince").val(), "moveCity", '$!{houseMoveModel.moveCity}');
            }
        ).change();
        $("#moveCity").on("change",
            function () {
                regionChange($("#moveCity").val(), "moveRegion", '$!{houseMoveModel.moveRegion}');
            }
        ).change();

        //添加户籍关系
        $("#addRelation").on("click",
            function () {
                var html = [];
                html.push('<tr class="houseRelationship">');
                html.push('<td><input type="checkbox" name="check" class="checkRelation"></td>');
                html.push('<td>');
                var relationshipOption = '<option value="子">子</option><option value="女">女</option><option value="配偶">配偶</option>';
                if($("#marriageStatus").val() == 2) {
                    relationshipOption = '<option value="子">子</option><option value="女">女</option>';
                }
                html.push('<select name="relationship">'+relationshipOption+'</select>');
                html.push('</td>');
                html.push('<td><input class="table_add_input" type="text" name="name"></td>');
                html.push('<td><input class="table_add_input" type="text" name="idNumber"></td>');
                html.push('<td><input type="radio" name="isRemove' + relation_idx + '" value="1" id="isRemove1' + relation_idx + '_yes"><label for="isRemove1' + relation_idx + '_yes">是</label>');
                html.push('<input class="m15" type="radio" name="isRemove' + relation_idx + '" value="2" id="isRemove2' + relation_idx + '_no"><label for="isRemove2' + relation_idx + '_no">否</label></td>');
                html.push('<td><input class="table_add_input" type="text" name="cultureDegree"></td>');
                html.push('</tr>');
                $(".houseRelationships").append(html.join(''));

                relation_idx = relation_idx + 1;
            }
        );

        $("#delRelation").on("click",
            function () {
                $(".checkRelation:checked").each(function () {
                    $(this).parents("tr").remove();
                });
            }
        );

        //提交
        $("#submit").on("click", function(){
            //询问框
            var index = layer.confirm('确定要保存申请人吗？', {
                btn: ['确认','取消'] //按钮
            }, function(){
                submit();
                layer.close(index);
            }, function(){
                layer.close(index);
            });
        });
        $("#submitAndContinue").on("click", function(){
            //询问框
            var index = layer.confirm('确定要保存并继续录入申请人吗？', {
                btn: ['确认','取消'] //按钮
            }, function(){
                submitAndContinue();
                layer.close(index);
            }, function(){
                layer.close(index);
            });
        });

        var _updateFileChange = function(){
            var obj = $(this);

            $.ajaxFileUpload({
                url : '${rc.contextPath}/fileUpload/uploadImage', //用于文件上传的服务器端请求地址
                fileElementId : $(this).attr("id"), //文件上传空间的id属性  <input type="file" id="file" name="file" />
                type : 'post',
                dataType : 'text', //返回值类型 一般设置为json
                obj: obj,
                success : function(result, status, obj) //服务器成功响应处理函数
                {

                    var _this = obj;
                    var resultObj = JSON.parse(result);
                    if (!resultObj.code) {
                        $("input[name="+ obj.attr("attr-inp") +"]").val(resultObj.data.attachmentUrl);
                    } else {
                        layer.msg(resultObj.msg);
                    }

                    /*var file_input = $('<input class="upload_input" type="file" id="'+ _this.find('.upload_input').attr("id") +'" name="'+ _this.find('.upload_input').attr("name") +'" accept="image/!*"/>');
                    _this.find("input.upload_input").remove();
                    file_input.on("change", _updateFileChange);
                    file_input.appendTo( _this);*/
                },
                error : function(result, status, e)//服务器响应失败处理函数
                {
                    layer.msg("图片上传失败");
                }
            });
        }

        $("input[name=idcard1]").on("change", _updateFileChange);
        //身份证正面上传
        /*$("input[name=idcard1]").on("change", function () {
            var form = $("<form>");
            form.attr('style', 'display:none');
            form.attr('method', 'post');
            form.attr('action', '${rc.contextPath}/fileUpload/uploadImage');
            form.attr('enctype', 'multipart/form-data');
            var file = $("input[name=idcard1]").clone();
            $(file).attr('name', 'file');
            $(form).append(file);

            $('body').append(form);

            $(form).ajaxSubmit(function (result) {
                var obj = JSON.parse(result);
                if (!obj.code) {
                    $("input[name=id_card_positive]").val(obj.data.attachmentUrl);
                } else {
                    layer.msg(obj.msg);
                }
            });
        });*/

        //身份证反面上传
        $("input[name=idcard2]").on("change", _updateFileChange);

        //初始化迁入户籍登记机关
        initOfficeInfo(0, $("#registeredOffice"), '$!{houseMoveModel.registeredOffice}');

        $("#registeredOffice").on("change", function () {
            initOfficeInfo($(this).val(), $("#registeredRegion"), '$!{houseMoveModel.registeredRegion}');
        }).change();

        //拟落户地区联动
        $("#registeredOffice").on("change", function () {
            var regionOffice =  $(this).find("option:selected").text();
            var region = "";
            if(regionOffice.indexOf("滨海新区") == -1 ){
                $("#region").children().prop("selected",false);
                region = regionOffice.substring(6,8);
                if(region == "海河"){
                    $("#region").find("option").each(function(i,ele){
                        if($(ele).text().indexOf("津南") != -1){
                            $(ele).prop("selected",true);
                        }
                    });
                }else if(region == "天津"){
                    $("#region").find("option").each(function(i,ele){
                        if($(ele).text().indexOf("滨海") != -1){
                            $(ele).prop("selected",true);
                        }
                    });
                }else if(region == "蓟县"){
                    $("#region").find("option").each(function(i,ele){
                        if($(ele).text().indexOf("蓟州") != -1){
                            $(ele).prop("selected",true);
                        }
                    });
                }else{
                    $("#region").find("option").each(function(i,ele){
                        if($(ele).text().substring(0,2) == region){
                            $(ele).prop("selected",true);
                        }
                    });
                }
            }else{
                $("#region").children().prop("selected",false);
                $("#region").find("option").each(function(i,ele){
                    if($(ele).text().indexOf("滨海") != -1){
                        $(ele).prop("selected",true);
                    }
                });
            }
        });

        $("#marriageStatus").on("change", function() {
            if($(this).val() == 2) {
                $("select[name=relationship]").each(function(){
                    if($(this).val() == '配偶') {
                        $(this).val('子');
                    }

                    $(this).find("option[value=配偶]").remove();
                });
            } else {
                $("select[name=relationship]").each(function(){
                    if($(this).find("option[value=配偶]").length == 0) {
                        $(this).append('<option value="配偶">配偶</option>');
                    }
                });
            }
        });

        //职业资格项
        $("input[name=professionType]").on("change", function(){
            var professionType = $('input:radio[name="professionType"]:checked').val();
            if(professionType == 1) {//无
                $("tr.professionType_2").hide();
                $("tr.professionType_3").hide();
                $("tr.professionType_23").hide();
            } else if(professionType == 2) {//具有职称
                $("tr.professionType_2").show();
                $("tr.professionType_3").hide();
                $("tr.professionType_23").show();
                //$("#showInfo").show();
                //$("#showInfo").text("近12个月缴纳社会保险费基数必须高于本市上年度职工月平均工资，所持职业资格证书类别与所在用人单位主营业务、本人当前工作岗位职责一致的，予以确认相应积分。");
            } else if(professionType == 3) {//具有职业资格
                $("tr.professionType_2").hide();
                $("tr.professionType_3").show();
                $("tr.professionType_23").show();
            }
        }).change();

        $("input[name=haveSon]").on("change", function(){
            var haveSon = $('input:radio[name="haveSon"]:checked').val();
            if(haveSon == 1) {
                $("#sonNumber").removeAttr("disabled");
            } else if(haveSon == 2) {
                $("#sonNumber").attr("disabled", "disabled");
                $("#sonNumber").val('0');
            }
        }).change();

        //验证身份证号信息
        $("#idNumber").on("blur", function(){
            if($.trim($(this).val()) == '') {
                return false;
            }
            postResultData("${rc.contextPath}/identityInfo/validIdNumber", {"idNumber":$(this).val(), "identityInfoId": $("#identityInfoId").val()}, function(data){
                if(data.validFlag == false) {
                    layer.msg('每期身份必须唯一, 请修改身份证信息!!');
                }
            });


            //初始化年龄和性别
            var idNumber = $(this).val();
            var strBirthday = "";
            var len = idNumber.length;
            var sexChar = 1;

            if (len == 18) {
                strBirthday = idNumber.substr(6, 4) + "-" + idNumber.substr(10, 2) + "-" + idNumber.substr(12, 2);
                sexChar = idNumber.substr(16, 1);
            }
            if (len == 15) {
                strBirthday = "19" + idNumber.substr(6, 2) + "-" + idNumber.substr(8, 2) + "-" + idNumber.substr(10, 2);
                sexChar = idNumber.substr(13, 1);
            }
            var birthDate = new Date(strBirthday);
            var nowDateTime = new Date();
            var age = nowDateTime.getFullYear() - birthDate.getFullYear();
            if (nowDateTime.getMonth() < birthDate.getMonth() || (nowDateTime.getMonth() == birthDate.getMonth() && nowDateTime.getDate() < birthDate.getDate())) {
                age--;
            }

            $("#birthday").val(strBirthday);
            $("#age").val(age);

            var $sex = $('input:radio[name="sex"]');
            if(sexChar % 2 == 0) {
                /*$sex.eq(2).prop("checked",true);
                $sex.prop("disabled",true);*/
                $("#female").click();/*
                $("#female").prop("checked","checked");
                $("#male").prop("checked","");*/
                /*$("input[name=sex]").val(2);*/
            } else {
                /*$sex.eq(1).prop("checked",true);
                $sex.prop("disabled",true);*/
                $("#male").click();/*
                $("#male").prop("checked","checked");
                $("#female").prop("checked","");*/
                /*$("input[name=sex]").val(1);*/
            }
        });


        //验证表单信息
        registerValidateForm();

        if('${addFlag}' == 'false') {
            initIdentityInfo();
        }

        $("#cultureDegree").on("change", function(){
            var cultureDegreeName = $(this).find("option:selected").text();
            if(cultureDegreeName == '本科及以上学历') {
                $("#degree").removeAttr("disabled");
            } else {
                $("#degree").attr("disabled", "disabled");
                $("#degree").val(0);
            }
        }).change();
    });

    /**
     * 提交表单
     */
    function submit() {
        if( validMassageInfo() == false) return false;
        var formInfo = getFormInfo();
        if(formInfo == false) {
            return false;
        }

        var url = "${rc.contextPath}/identityInfo/addIdentityInfo";
        if('${addFlag}' == 'false') {
            url = "${rc.contextPath}/identityInfo/updateIdentityInfo";
        }

        var flag = false;
        postSyncResultData(url, formInfo, function(data){
            flag = true;
        });

        if(flag) {
            /*window.location.href = "${rc.contextPath}/identityInfo/index.html";*/

            layer.msg('保存成功!!', {
                time: 1000
            }, function () {

                if(window.opener && window.opener.component) {
                    window.opener.component.load();
                    window.close();
                } else {
                    window.close();
                }

            });
        }
    }

    /**
     * 提交并继续录入
     */
    function submitAndContinue() {
        var formInfo = getFormInfo();
        if(formInfo == false) {
            return false;
        }

        var url = "${rc.contextPath}/identityInfo/addIdentityInfo";
        if('${addFlag}' == 'false') {
            url = "${rc.contextPath}/identityInfo/updateIdentityInfo";
        }

        var flag = false;
        postSyncResultData(url, formInfo, function(data){
            flag = true;
        });

        if(flag) {
            layer.msg('保存成功!!', {
                time: 1000
            }, function () {
                window.open("${rc.contextPath}/identityInfo/applicationAdd.html");

                /*window.location.href = "${rc.contextPath}/identityInfo/index.html";*/

                if(window.opener && window.opener.component) {
                    window.opener.component.load();
                    window.close();
                } else {
                    //history.go(-1);
                    window.close();
                }
            });
        }
    }

    /**
     * 获取表单信息
     */
    function getFormInfo() {
        var validateFlag = true;
        if(!$("#identityInfoForm").valid()) {
            validateFlag = false;
        }

        if(!$("#houseMoveForm").valid()) {
            validateFlag = false;
        }

        if(!$("#houseOtherForm").valid()) {
            validateFlag = false;
        }

        $(".houseRelationship").each(function () {
            var relationship = $(this).find("select[name=relationship]").val();
            var name = $(this).find("input[name=name]").val();
            var idNumber = $(this).find("input[name=idNumber]").val();
            var isRemove = $(this).find("input[type=radio]:checked").val();
            var cultureDegree = $(this).find("input[name=cultureDegree]").val();

            if($.trim(name) == '') {
                layer.msg("请填写姓名。");
                $(this).find("input[name=name]").focus();
                validateFlag = false;
                return false;
            }

            //身份证位数校验
            if(relationship == '配偶') {
                var pattern = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
                if(!pattern.test(idNumber)) {
                    layer.msg("身份证格式不正确。");
                    $(this).find("input[name=idNumber]").focus();
                    validateFlag = false;
                    return false;
                }

                if(!validateIdNumber(idNumber)) {
                    layer.msg("配偶身份证格式不正确。");
                    $(this).find("input[name=idNumber]").focus();
                    validateFlag = false;

                    return false;
                }
            } else {
                if(!idNumber) {
                    $(this).find("input[name=idNumber]").val(' ');
                }
            }

            if(!isRemove) {
                layer.msg("请填写是否随迁。");
                $(this).find("input[name=isRemove]").focus();
                validateFlag = false;
                return false;
            }

            if($.trim(cultureDegree) == '') {
                layer.msg("请填写文化程度。");
                $(this).find("input[name=cultureDegree]").focus();
                validateFlag = false;
                return false;
            }
        });

        //身份证验证(正面)
        if($("input[name=id_card_positive]").val() == '') {
            layer.msg("请上传身份证正面图片。");
            return false;
        }

        //身份证验证(反面)
        if($("input[name=id_card_opposite]").val() == '') {
            layer.msg("请上传身份证反面图片。");
            return false;
        }

        if(!validateFlag) {
            return false;
        }

        //验证职业资格证书信息
        var professionType = $('input:radio[name="professionType"]:checked').val();
        if(professionType != 1) {
            if($.trim($("#issuingAuthority").val()) == '') {
                layer.msg("请填写发证机关。");
                validateFlag = false;
                return false;
            }
            if($.trim($("#issuingDate").val()) == '') {
                layer.msg("请填写发证日期。");
                validateFlag = false;
                return false;
            }

            if($.trim($("#certificateCode").val()) == '') {
                layer.msg("请填写证书编号。");
                validateFlag = false;
                return false;
            }
            var reg = /^[0-9a-zA-Z]*$/g
            var certificateCode = $.trim($("#certificateCode").val());
            if(!reg.test(certificateCode)) {
                layer.msg("证书编号只能包含数字和字母, 请重新输入。");
                validateFlag = false;
                return false;
            }
        }

        if(!validateFlag) {
            return false;
        }

        var identityInfo = serializeForm($(".identityInfoForm"));
        var houseMoveInfo = serializeForm($(".houseMoveForm"));

        var houseRelationshipInfos = [];
        //初始化家庭关系信息
        $(".houseRelationship").each(function () {
            var id = $(this).find("input[name=id]").val();
            var relationship = $(this).find("select[name=relationship]").val();
            var name = $(this).find("input[name=name]").val();
            var idNumber = $(this).find("input[name=idNumber]").val();
            var isRemove = $(this).find("input[type=radio]:checked").val();
            var cultureDegree = $(this).find("input[name=cultureDegree]").val();

            var houseRelationship = {
                "id": id,
                "relationship": relationship,
                "name": name,
                "idNumber": idNumber,
                "isRemove": isRemove,
                "cultureDegree": cultureDegree
            };
            houseRelationshipInfos.push(houseRelationship);
        });

        var houseOtherInfo = serializeForm($(".houseOtherForm"));
        var houseProfessionInfo = serializeForm($(".houseProfessionForm"));

        identityInfo["houseMoveModel"] = houseMoveInfo;
        identityInfo["houseRelationshipModelList"] = houseRelationshipInfos;
        identityInfo["houseOtherModel"] = houseOtherInfo;
        identityInfo["houseProfessionModel"] = houseProfessionInfo;

        var captcha = $("input[name=captcha]").val();

        var identityInfoJson = JSON.stringify(identityInfo);

        var formData = {"identityInfoJson": identityInfoJson, "captcha": captcha};

        return formData;
    }

    /**
     * 省市区变更
     *
     * @param regionId
     */
    function regionChange(regionId, changeRegion, defaultVal) {
        if (regionId == 0 && changeRegion != "moveProvince") {
            return;
        }

        if (changeRegion == "moveCity") {
            $("#moveRegion").html('<option value="0">请选择</option>');
        }

        getSyncResultData("${rc.contextPath}/region/child/regions/" + regionId, {}, function(data){
            var html = [];
            html.push('<option value="0">请选择</option>');
            if (data != undefined) {
                for (var i = 0; i < data.length; i++) {
                    var selected = '';
                    if(defaultVal != '' && defaultVal == data[i].id) {
                        selected = 'selected';
                    }
                    html.push('<option value="' + data[i].id + '" '+ selected +'>' + data[i].name + '</option>');
                }
            }
            $("#" + changeRegion).html(html.join(''));
        });

    }

    /**
     * 初始化评分选项信息
     */
    function initIndicatorInfo(indicatorInfo, field, defaultVal) {
        if(indicatorInfo == undefined) {
            field.html('');
        }
        var indicatorItems = indicatorInfo.indicatorItems;

        if(indicatorItems == undefined || indicatorItems.length == 0) {
            field.html('');
        }
        var arr = new Array();
        for(var i=0; i<indicatorItems.length; i++) {
            var selected = '';
            if(defaultVal == '' && indicatorItems[i].content == '无') {
                selected = " selected ";
            } else if(defaultVal != '' && indicatorItems[i].id == defaultVal){
                selected = " selected ";
            }

            if(indicatorItems[i].content != '具有高级职称' && indicatorItems[i].content != '具有中级职称'
                && indicatorItems[i].content != '具有初级职称'  ){
                arr.push('<option value="'+ indicatorItems[i].id +'" ' + selected + '>'+ indicatorItems[i].content +'</option>');
            }

        }

        field.html(arr.join(''));
    }


    /**
     * 初始化评分选项信息
     * 2018年7月24日，去掉“无”字，位于职业资格证书--具有职业资格--职业资格级别 的下拉列表中
     */
    function initIndicatorInfo_2(indicatorInfo, field, defaultVal) {
        if(indicatorInfo == undefined) {
            field.html('');
        }
        var indicatorItems = indicatorInfo.indicatorItems;

        if(indicatorItems == undefined || indicatorItems.length == 0) {
            field.html('');
        }
        var arr = new Array();
        for(var i=0; i<indicatorItems.length; i++) {
            var selected = '';
            if(defaultVal == '' && indicatorItems[i].content == '无') {
                selected = " selected ";
            } else if(defaultVal != '' && indicatorItems[i].id == defaultVal){
                selected = " selected ";
            }

            if(indicatorItems[i].content != '具有高级职称' && indicatorItems[i].content != '具有中级职称'
                && indicatorItems[i].content != '具有初级职称' && indicatorItems[i].content != '无'  ){
                arr.push('<option value="'+ indicatorItems[i].id +'" ' + selected + '>'+ indicatorItems[i].content +'</option>');
            }

        }

        field.html(arr.join(''));
    }

    /**
     * 初始化迁入登记机关
     *
     */
    function initOfficeInfo(officeId, field, defaultVal) {
        getSyncResultData("${rc.contextPath}/office/getOffices", {"parentId": officeId}, function (data) {
            var offices = data;
            var officeArr = new Array();
            for (var i = 0; i < offices.length; i++) {
                var office = offices[i];
                var selected = '';
                if(defaultVal != '' && defaultVal == office["id"]) {
                    selected = 'selected';
                }
                officeArr.push('<option value="' + office["id"] + '" '+ selected +'>' + office["name"] + '</option>');
            }
            field.html(officeArr.join(''));
        });
    }

    //验证表单信息
    function registerValidateForm() {
        //身份证信息验证
        $("#identityInfoForm").validate({
            rules: {
                idNumber: {
                    required: true,
                    isIdCardNo: true
                },
                name: {
                    required: true,
                    maxlength: 20
                },
                sex: {
                    required: true
                },
                birthday: {
                    required: true
                },
                age: {
                    required: true,
                    isAge: true
                },
                nation: {
                    required: true,
                    maxlength: 50
                }
            },
            messages: {
                idNumber: {
                    required: "请输入身份证号"
                },
                name: {
                    required: "请输入姓名",
                    maxlength: "姓名长度不能大于 20 个字母"
                },
                sex: {
                    required: "请输入性别"
                },
                birthday: {
                    required: "请输入出生日期"
                },
                age: {
                    required: "请输入年龄"
                },
                nation: {
                    required: "请输入民族",
                    maxlength: "民族长度不能大于 50 个字母"
                }
            },

            errorPlacement: function (error, element) { //指定错误信息位置
                if (element.is(':radio') || element.is(':checkbox')) { //如果是radio或checkbox
                    var eid = element.attr('name'); //获取元素的name属性
                    error.appendTo(element.parent()); //将错误信息添加当前元素的父结点后面
                } else {
                    error.insertAfter(element);
                }
            }
        });

        $("#houseMoveForm").validate({
            rules: {
                moveRegion: {
                    required: true
                },
                moveAddress: {
                    required: true,
                    maxlength: 100
                },
                moveRegisteredOffice: {
                    required: true,
                    maxlength: 100
                },
                houseNature: {
                    required: true
                },
                settledNature: {
                    required: true
                },
                registeredRegion: {
                    required: true
                },
                address: {
                    required: true,
                    maxlength: 100
                },
                witness: {
                    required: true,
                    maxlength: 50
                },
                witnessPhone: {
                    required: true,
                    isMobile: true
                },
                witnessAddress: {
                    required: true,
                    maxlength: 100
                },
                region: {
                    required: true
                },
                marriageStatus: {
                    required: true
                },
                haveSon: {
                    required: true
                }
            },
            messages: {
                moveRegion: {
                    required: "请输入迁出地区"
                },
                moveAddress: {
                    required: "请输入迁出地地址",
                    maxlength: "姓名长度不能大于 100 个字母"
                },
                moveRegisteredOffice: {
                    required: "请输入现户籍登记机关",
                    maxlength: "现户籍登记机关长度不能大于 100 个字母"
                },
                houseNature: {
                    required: "请输入现户口性质"
                },
                settledNature: {
                    required: "请输入落户性质"
                },
                registeredRegion: {
                    required: "请输入迁入户籍登记机关"
                },
                address: {
                    required: "请输入迁入地址详细地址",
                    maxlength: "姓名长度不能大于 100 个字母"
                },
                witness: {
                    required: "请输入证明收件人",
                    maxlength: "姓名长度不能大于 50 个字母"
                },
                witnessPhone: {
                    required: "请输入证明收件人电话"
                },
                witnessAddress: {
                    required: "请输入证明收件地址",
                    maxlength: "姓名长度不能大于 100 个字母"
                },
                region: {
                    required: "请输入拟落户地区"
                },
                marriageStatus: {
                    required: "请输入婚姻状况"
                },
                haveSon: {
                    required: "请输入有无子女"
                }
            },

            errorPlacement: function (error, element) { //指定错误信息位置
                if (element.is(':radio') || element.is(':checkbox')) { //如果是radio或checkbox
                    var eid = element.attr('name'); //获取元素的name属性
                    error.appendTo(element.parent()); //将错误信息添加当前元素的父结点后面
                } else {
                    error.insertAfter(element);
                }
            }
        });

        //其他信息验证
        $("#houseOtherForm").validate({
            rules: {
                applicantType: {
                    required: true
                },
                politicalStatus: {
                    required: true
                },
                soldierMeritorious: {
                    required: true
                },
                cultureDegree: {
                    required: true
                },
                degree: {
                    required: true
                },
                profession: {
                    required: true,
                    maxlength: 50
                },
                companyName: {
                    required: true,
                    maxlength: 100
                },
                companyAddress: {
                    required: true,
                    maxlength: 100
                },
                jobTitle: {
                    required: true,
                    maxlength: 100
                },
                jobContent: {
                    required: true,
                    maxlength: 100
                },
                companyPhone: {
                    required: true,
                    isPhone: true
                },
                selfPhone: {
                    required: true,
                    isMobile: true
                },
                applicationDate: {
                    required: true
                },
                socialSecurityPay: {
                    required: true
                },
                providentFund: {
                    required: true
                },
                taxes: {
                    required: true
                },
                detention: {
                    required: true
                },
                penalty: {
                    required: true
                },
                awardsTitle: {
                    required: true
                }
            },
            messages: {
                applicantType: {
                    required: "请输入申请人类型"
                },
                politicalStatus: {
                    required: "请输入政治面貌"
                },
                soldierMeritorious: {
                    required: "请输入军人立功"
                },
                cultureDegree: {
                    required: "请输入文化程度"
                },
                degree: {
                    required: "请输入学位"
                },
                profession: {
                    required: "请输入专业",
                    maxlength: 50
                },
                companyName: {
                    required: "请输入现单位名称",
                    maxlength: 100
                },
                companyAddress: {
                    required: "请输入现单位地址",
                    maxlength: 100
                },
                jobTitle: {
                    required: "请输入当前工作岗位",
                    maxlength: 100
                },
                jobContent: {
                    required: "主要从事工作内容",
                    maxlength: 100
                },
                companyPhone: {
                    required: "请输入单位座机电话"
                },
                selfPhone: {
                    required: "请输入本人手机"
                },
                applicationDate: {
                    required: "请输入居住证申领日期"
                },
                socialSecurityPay: {
                    required: "请输入社保缴纳"
                },
                providentFund: {
                    required: "请输入公积金"
                },
                taxes: {
                    required: "请输入纳税情况"
                },
                detention: {
                    required: "请输入拘留记录"
                },
                penalty: {
                    required: "请输入获刑记录"
                },
                awardsTitle: {
                    required: "请输入奖项荣誉称号"
                }
            },

            errorPlacement: function (error, element) { //指定错误信息位置
                if (element.is(':radio') || element.is(':checkbox')) { //如果是radio或checkbox
                    var eid = element.attr('name'); //获取元素的name属性
                    error.appendTo(element.parent()); //将错误信息添加当前元素的父结点后面
                } else {
                    error.insertAfter(element);
                }
            }
        });
    }

    //初始化申请人信息
    function initIdentityInfo() {
        //民族
        $("#nation").val('$!{identityInfo.nation}');

        //户籍迁移信息
        $("#houseNature").val('$!{houseMoveModel.houseNature}');
        $("#settledNature").val('$!{houseMoveModel.settledNature}');
        $("#region").val('$!{houseMoveModel.region}');
        $("#marriageStatus").val('$!{houseMoveModel.marriageStatus}');

        //其他信息
        $("#politicalStatus").val('$!{houseOtherModel.politicalStatus}');
        $("#degree").val('$!{houseOtherModel.degree}');


        //职业资格证书
        $("#jobTitleLevel").val('$!{houseProfessionModel.jobTitleLevel}');
        $("#professionTitle").val('$!{houseProfessionModel.professionTitle}');
        $("#jobName").val('$!{houseProfessionModel.jobName}');
    }

    //校验身份证号
    function validateIdNumber(idNumber) {
        if(idNumber.length == 18) {
            var arr = [7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];

            var sum = 0;
            for(var i=0; i<arr.length; i++){
                sum += parseInt(idNumber.charAt(i)) * arr[i];
            }
            //2、用加出来和除以11，看余数，
            var c = sum % 11;

            //3、分别对应的最后一位身份证的号码为：1－0－X－9－8－7－6－5－4－3－2
            var ch = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'];
            var code = ch[c];
            var last = idNumber.charAt(17);
            last = last=='x' ? 'X': last;

            return last == code;
        }

        return true;
    }

    function showInfo(){
        var val = $("#jobTitleLevel").val();
        if(val=="2" || val=="3") {
//            $("#showInfo").show();
//            $("#showInfo").text("近12个月缴纳社会保险费基数必须高于本市上年度职工月平均工资，所持职业资格证书类别与所在用人单位主营业务、本人当前工作岗位职责一致的，予以确认相应积分。");
            var index = layer.confirm('近12个月缴纳社会保险费基数必须高于本市上年度职工月平均工资，所持职业资格证书类别与所在用人单位主营业务、本人当前工作岗位职责一致的，予以确认相应积分。', {
                btn: ['确认'] //按钮
            }, function(){
                layer.close(index);
            });
        }else{
//            $("#showInfo").hide();
        }
    }


    function showInfo(){
        var val = $("#jobLevel").val();
        if(val=="19" || val=="20") {
//            $("#showInfo").show();
//            $("#showInfo").text("近12个月缴纳社会保险费基数必须高于本市上年度职工月平均工资，所持职业资格证书类别与所在用人单位主营业务、本人当前工作岗位职责一致的，予以确认相应积分。");
            var index = layer.confirm('近12个月缴纳社会保险费基数必须高于本市上年度职工月平均工资，所持职业资格证书类别与所在用人单位主营业务、本人当前工作岗位职责一致的，予以确认相应积分。', {
                btn: ['确认'] //按钮
            }, function(){
                layer.close(index);
            });
        }else{
//            $("#showInfo").hide();
        }
    }

    function showInfo2(){
        var val = $("#jobLevel").val();
        if(val=="19" || val=="20") {
//            $("#showInfo").show();
//            $("#showInfo").text("近12个月缴纳社会保险费基数必须高于本市上年度职工月平均工资，所持职业资格证书类别与所在用人单位主营业务、本人当前工作岗位职责一致的，予以确认相应积分。");
            var index = layer.confirm('近12个月缴纳社会保险费基数必须高于本市上年度职工月平均工资，所持职业资格证书类别与所在用人单位主营业务、本人当前工作岗位职责一致的，予以确认相应积分。', {
                btn: ['确认'] //按钮
            }, function(){
                layer.close(index);
            });
        }else{
//            $("#showInfo").hide();
        }
    }

    function showInfo3(){
        var val = $("#jobType").val();
        if(val=="27" || val=="28" || val=="29") {
//            $("#showInfo").show();
//            $("#showInfo").text("近12个月缴纳社会保险费基数必须高于本市上年度职工月平均工资，所持职业资格证书类别与所在用人单位主营业务、本人当前工作岗位职责一致的，予以确认相应积分。");
            var index = layer.confirm('申请人申请职业（工种）紧缺程度积分的，其经确认的国家职业资格证书上所标明的职业（工种）应当与当年人力社保部门公布的天津市' +
                                  '《职业市场需求程度及培训成本目录》中的职业（工种）名称一致，且与所在用人单位主营业务、营业执照批准经营范围、本人当前工作岗位职责相符。', {
                btn: ['确认'] //按钮
            }, function(){
                layer.close(index);
            });
        }else{
//            $("#showInfo").hide();
        }
    }

    /**
     * 2018年7月26日
     * 已婚必须添加配偶信息
     * 验证配偶信息和子女信息是否和填写的信息一致
     * @returns {boolean}
     */
    function  validMassageInfo(){
        var num = parseInt($("#sonNumber").val());//填写子女的数量
        var relship = [];
        $(".houseRelationship").find("select[name=relationship]").each(function(i,ele){
            relship.push($(ele).val());
        });
        var relationship =relship.toString();//relship.length是添加信息的数量&& relationship.indexOf("配偶") == -1
        var state = $("#marriageStatus").find("option:selected").text();
        if(num == 0){
            if(state == "已婚"){
                if(relship.length == 1){
                    if(relationship.indexOf("配偶") == -1){
                        layer.msg("请添加配偶信息！");
                        return false;
                    }
                }else if(relship.length == 0){
                    layer.msg("请添加配偶信息！");
                    return false;
                }else{
                    layer.msg("只能添加配偶信息！");
                    return false;
                }
            }
        }else{
            //num:填写子女的数量;   relship.length: 添加信息的数量
            if(state == "已婚" ){
                if(relationship.indexOf("配偶") == -1){
                    layer.msg("请添加配偶信息！");
                    return false;
                }else{
                    if(relship.length <= num){
                        layer.msg("请添加子女信息！");
                        return false;
                    }else if(relship.length >= num + 2 ){
                        layer.msg("请保持子女数量与填写数量一致！");
                        return false;
                    }
                }
            }
        }
        return true;
    }

</script>

</html>

